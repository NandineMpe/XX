<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <link rel="icon" type="image/x-icon" href="https://ae7an1f5d2ydi587.public.blob.vercel-storage.com/Augentik/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Augentik</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <link rel="preload" href="https://use.typekit.net/af/efe4a5/00000000000000007735e609/30/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3" as="font" type="font/woff2" crossorigin>
    <script type="module" crossorigin src="/webui/assets/index-DaDDTdBO.js"></script>
  </head>
  <body>
    <div id="root"></div>

    <!-- Robust redirect to backend WebUI login for /login and #/login -->
    <script>
      (function(){
        // Always send users to the frontend login on Vercel
        var TARGET_LOGIN = 'https://augentik.com/webui/#/login';

        function isOnBackend(){
          try { return /railway\.app$/i.test(location.hostname) && location.pathname.indexOf('/webui') === 0; }
          catch(_) { return false; }
        }

        function shouldRedirectNow(){
          try {
            var onPathLogin = location.pathname === '/login';
            var onHashLogin = /#\/?login$/i.test(location.hash || '');
            return !isOnBackend() && (onPathLogin || onHashLogin);
          } catch(_) { return false; }
        }

        function redirectToBackendLogin(){
          try { sessionStorage.setItem('signinRedirected','1'); } catch(_) {}
          location.replace(TARGET_LOGIN);
        }

        if (shouldRedirectNow()) redirectToBackendLogin();
        window.addEventListener('hashchange', function(){ if (shouldRedirectNow()) redirectToBackendLogin(); });
      })();
    </script>

    <!-- Dedicated launch button for Early Access (outside React root to avoid interference) -->
    <button id="exclusive-access-launch" type="button" aria-haspopup="dialog" aria-controls="zoho-exclusive-modal" style="position:fixed;bottom:16px;right:16px;z-index:1000;background:linear-gradient(135deg,#111,#000);color:#fff;padding:12px 18px;border-radius:9999px;border:1px solid #333;font-weight:600;box-shadow:0 4px 14px rgba(0,0,0,0.25);cursor:pointer;">
      Request Exclusive Access
    </button>

    <!-- Minimal modal with Zoho form embed (outside React to ensure stability) -->
    <div id="zoho-exclusive-overlay" hidden style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.65);z-index:1000;"></div>
    <div id="zoho-exclusive-modal" hidden role="dialog" aria-modal="true" aria-labelledby="zoho-exclusive-title" style="display:none;position:fixed;inset:0;z-index:1001;align-items:center;justify-content:center;">
      <div style="width:100%;max-width:720px;margin:24px;background:#0b0b0b;border:1px solid #222;border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,0.45);padding:24px;">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;">
          <h2 id="zoho-exclusive-title" style="margin:0;color:#fff;font-size:18px;font-weight:600;">Request Exclusive Access</h2>
          <button id="zoho-exclusive-close" aria-label="Close" style="background:#111;border:1px solid #333;color:#bbb;border-radius:8px;padding:6px 10px;cursor:pointer;">âœ•</button>
        </div>
        <div style="border-top:1px solid #222;margin:8px 0 16px 0;"></div>
        <div>
          <iframe aria-label='REQUEST EXCLUSIVE ACCESS' frameborder="0" style="height:500px;width:99%;border:none;" src='https://forms.zohopublic.eu/nandiniauge1/form/Requestafreetrial/formperma/MWU4mCzC_8wGeyhrqD9YtBM7WLeZWjhMXJeSTtBBREM'></iframe>
        </div>
      </div>
    </div>

    <script>
      (function () {
        function replaceStatutoryAudits() {
          var walker = document.createTreeWalker(document.body, NodeFilter.SHOW_TEXT);
          var changed = false;
          while (walker.nextNode()) {
            var node = walker.currentNode;
            var text = node && node.nodeValue ? node.nodeValue : "";
            if (!text) continue;
            var replaced = text
              .replace(/Statutory\s+audits/gi, "Audits")
              .replace(/Statutory\s+audit/gi, "Audit");
            if (replaced !== text) {
              node.nodeValue = replaced;
              changed = true;
            }
          }
          return changed;
        }

        // Initial attempt (in case content already rendered)
        replaceStatutoryAudits();

        // Observe for React render completion
        var root = document.getElementById("root") || document.body;
        var observer = new MutationObserver(function () {
          if (replaceStatutoryAudits()) {
            observer.disconnect();
          }
        });
        observer.observe(root, { childList: true, subtree: true });
        setTimeout(function () { observer.disconnect(); }, 5000);
      })();
    </script>

    <script>
      // Ensure clicking "Sign In" routes to canonical backend web UI login
      (function(){
        // Route user directly to backend web UI login on Railway
        var TARGET_LOGIN = 'https://augentik.com/webui/#/login';

        function isOnBackendOrLoginRoute(){
          try {
            var onBackend = /railway\.app$/i.test(location.hostname) && location.pathname.indexOf('/webui') === 0;
            var onLoginPath = location.pathname === '/login' || /#\/?login$/i.test(location.hash);
            return onBackend || onLoginPath;
          } catch (_) { return false; }
        }

        function wireSignIn(){
          if (isOnBackendOrLoginRoute()) return; // avoid loops when already on backend/login
          var root = document.getElementById('root') || document.body;
          var candidates = Array.from(root.querySelectorAll('a, button, [role="button"], [class]'));
          candidates.forEach(function(el){
            try{
              if (el.getAttribute('data-signin-wired') === '1') return;
              var text = (el.innerText || '').trim();
              var href = (el.getAttribute && el.getAttribute('href')) || '';
              var looksLikeLoginLink = /#\/?login$/i.test(href) || /\/login(?:[#?].*)?$/i.test(href) || /railway\.app.*\/webui\/.*#\/?login/i.test(href);
              if (!text && !looksLikeLoginLink) return;
              if (/^sign\s*in$/i.test(text) || /^(?:log\s*in|login)$/i.test(text) || looksLikeLoginLink){
                el.setAttribute('data-signin-wired','1');
                el.addEventListener('click', function(e){
                  e.preventDefault();
                  console.log('[Sign In] Navigating to', TARGET_LOGIN);
                  window.location.href = TARGET_LOGIN;
                }, true);
                if (el.tagName === 'A') { el.setAttribute('href', TARGET_LOGIN); el.removeAttribute('target'); el.removeAttribute('rel'); }
              }
            }catch(_){ }
          });
        }

        // Only wire if we haven't just redirected
        var recentlyRedirected = false;
        try { recentlyRedirected = sessionStorage.getItem('signinRedirected') === '1'; sessionStorage.removeItem('signinRedirected'); } catch(_){ }
        if (!recentlyRedirected) wireSignIn();

        var mo = new MutationObserver(function(){ if (!recentlyRedirected) wireSignIn(); });
        mo.observe(document.documentElement, { childList:true, subtree:true });
      })();
    </script>

    <script>
      // Rewire any in-app "Request Exclusive Access" triggers to open our Zoho modal
      (function () {
        function wireExclusiveAccess() {
          var wiredAny = false;

          var appRoot = document.getElementById('root');
          if (!appRoot) return false;

          var openViaLauncher = function(e){
            if (e) e.preventDefault();
            var launcher = document.getElementById('exclusive-access-launch');
            if (launcher && typeof launcher.click === 'function') launcher.click();
          };

          var candidates = Array.from(appRoot.querySelectorAll('button, a, [role="button"], [data-testid], [class]'));
          candidates.forEach(function (el) {
            try {
              if (el.getAttribute('data-exclusive-wired') === '1') return;
              var text = (el.innerText || '').trim();
              if (!text) return;
              if (/^request\s+exclusive\s+access$/i.test(text)) {
                el.setAttribute('data-exclusive-wired', '1');
                el.addEventListener('click', openViaLauncher, true);
                if (el.tagName === 'A') { el.setAttribute('href', '#'); }
                wiredAny = true;
              }
            } catch (_) {}
          });

          var headings = Array.from(appRoot.querySelectorAll('h1, h2, [role="heading"]'));
          headings.forEach(function (h) {
            try {
              var t = (h.innerText || '').trim();
              if (/^request\s+exclusive\s+access$/i.test(t)) {
                var modal = h.closest('[role="dialog"], .modal, .Dialog, .fixed, .inset-0');
                if (modal) { modal.remove(); wiredAny = true; }
              }
            } catch (_) {}
          });

          return wiredAny;
        }

        wireExclusiveAccess();

        var mo = new MutationObserver(function () { wireExclusiveAccess(); });
        mo.observe(document.documentElement, { childList: true, subtree: true });
      })();
    </script>

    <script>
      // Simple modal controls for the Zoho form
      (function () {
        var btn = document.getElementById('exclusive-access-launch');
        var overlay = document.getElementById('zoho-exclusive-overlay');
        var modal = document.getElementById('zoho-exclusive-modal');
        var closeBtn = document.getElementById('zoho-exclusive-close');

        function openModal() {
          if (overlay) { overlay.hidden = false; overlay.style.display = 'block'; }
          if (modal) { modal.hidden = false; modal.style.display = 'flex'; }
          document.body.style.overflow = 'hidden';
        }

        function closeModal() {
          if (overlay) { overlay.style.display = 'none'; overlay.hidden = true; }
          if (modal) { modal.style.display = 'none'; modal.hidden = true; }
          document.body.style.overflow = '';
        }

        if (btn) btn.addEventListener('click', openModal);
        if (closeBtn) closeBtn.addEventListener('click', closeModal);
        if (overlay) overlay.addEventListener('click', closeModal);
        document.addEventListener('keydown', function (e) { if (e.key === 'Escape') closeModal(); });

        // Force closed on load in case any CSS/script toggled it
        window.addEventListener('DOMContentLoaded', function(){ closeModal(); });
      })();
    </script>

  </body>
</html>
