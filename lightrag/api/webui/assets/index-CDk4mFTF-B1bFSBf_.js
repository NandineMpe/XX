import{h as K,_ as v,B as Y,a as q,v as J,p as A,d as E,n as S,w as Q,A as U}from"./index-CnQ5AggB.js";const j=/[#.]/g;function W(e,t){const r=e||"",n={};let o=0,i,a;for(;o<r.length;){j.lastIndex=o;const c=j.exec(r),s=r.slice(o,c?c.index:r.length);s&&(i?i==="#"?n.id=s:Array.isArray(n.className)?n.className.push(s):n.className=[s]:a=s,o+=s.length),c&&(i=c[0],o++)}return{type:"element",tagName:a||t||"div",properties:n,children:[]}}function L(e,t,r){const n=r?$(r):void 0;function o(i,a,...c){let s;if(i==null){s={type:"root",children:[]};const u=a;c.unshift(u)}else{s=W(i,t);const u=s.tagName.toLowerCase(),l=n?n.get(u):void 0;if(s.tagName=l||u,X(a))c.unshift(a);else for(const[f,d]of Object.entries(a))Z(e,s.properties,f,d)}for(const u of c)y(s.children,u);return s.type==="element"&&s.tagName==="template"&&(s.content={type:"root",children:s.children},s.children=[]),s}return o}function X(e){if(e===null||typeof e!="object"||Array.isArray(e))return!0;if(typeof e.type!="string")return!1;const t=e,r=Object.keys(e);for(const n of r){const o=t[n];if(o&&typeof o=="object"){if(!Array.isArray(o))return!0;const i=o;for(const a of i)if(typeof a!="number"&&typeof a!="string")return!0}}return!!("children"in e&&Array.isArray(e.children))}function Z(e,t,r,n){const o=J(e,r);let i;if(n!=null){if(typeof n=="number"){if(Number.isNaN(n))return;i=n}else typeof n=="boolean"?i=n:typeof n=="string"?o.spaceSeparated?i=A(n):o.commaSeparated?i=E(n):o.commaOrSpaceSeparated?i=A(E(n).join(" ")):i=C(o,o.property,n):Array.isArray(n)?i=[...n]:i=o.property==="style"?z(n):String(n);if(Array.isArray(i)){const a=[];for(const c of i)a.push(C(o,o.property,c));i=a}o.property==="className"&&Array.isArray(t.className)&&(i=t.className.concat(i)),t[o.property]=i}}function y(e,t){if(t!=null)if(typeof t=="number"||typeof t=="string")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(const r of t)y(e,r);else if(typeof t=="object"&&"type"in t)t.type==="root"?y(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function C(e,t,r){if(typeof r=="string"){if(e.number&&r&&!Number.isNaN(Number(r)))return Number(r);if((e.boolean||e.overloadedBoolean)&&(r===""||S(r)===S(t)))return!0}return r}function z(e){const t=[];for(const[r,n]of Object.entries(e))t.push([r,n].join(": "));return t.join("; ")}function $(e){const t=new Map;for(const r of e)t.set(r.toLowerCase(),r);return t}const ee=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],te=L(Q,"div"),re=L(U,"g",ee),m={html:"http://www.w3.org/1999/xhtml",svg:"http://www.w3.org/2000/svg"};function ne(e,t){return F(e,{})||{type:"root",children:[]}}function F(e,t){const r=oe(e,t);return r&&t.afterTransform&&t.afterTransform(e,r),r}function oe(e,t){switch(e.nodeType){case 1:return ce(e,t);case 3:return ae(e);case 8:return se(e);case 9:return T(e,t);case 10:return ie();case 11:return T(e,t);default:return}}function T(e,t){return{type:"root",children:G(e,t)}}function ie(){return{type:"doctype"}}function ae(e){return{type:"text",value:e.nodeValue||""}}function se(e){return{type:"comment",value:e.nodeValue||""}}function ce(e,t){const r=e.namespaceURI,n=r===m.svg?re:te,o=r===m.html?e.tagName.toLowerCase():e.tagName,i=r===m.html&&o==="template"?e.content:e,a=e.getAttributeNames(),c={};let s=-1;for(;++s<a.length;)c[a[s]]=e.getAttribute(a[s])||"";return n(o,c,G(i,t))}function G(e,t){const r=e.childNodes,n=[];let o=-1;for(;++o<r.length;){const i=F(r[o],t);i!==void 0&&n.push(i)}return n}new DOMParser;function ue(e,t){const r=le(e);return ne(r)}function le(e){const t=document.createElement("template");return t.innerHTML=e,t.content}const M=function(e,t,r){const n=q(r);if(!e||!e.type||!e.children)throw new Error("Expected parent node");if(typeof t=="number"){if(t<0||t===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(t=e.children.indexOf(t),t<0)throw new Error("Expected child node or index");for(;++t<e.children.length;)if(n(e.children[t],t,e))return e.children[t]},h=function(e){if(e==null)return he;if(typeof e=="string")return pe(e);if(typeof e=="object")return fe(e);if(typeof e=="function")return b(e);throw new Error("Expected function, string, or array as `test`")};function fe(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=h(e[r]);return b(n);function n(...o){let i=-1;for(;++i<t.length;)if(t[i].apply(this,o))return!0;return!1}}function pe(e){return b(t);function t(r){return r.tagName===e}}function b(e){return t;function t(r,n,o){return!!(de(r)&&e.call(this,r,typeof n=="number"?n:void 0,o||void 0))}}function he(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="element"&&"tagName"in e&&typeof e.tagName=="string")}function de(e){return e!==null&&typeof e=="object"&&"type"in e&&"tagName"in e}const k=/\n/g,I=/[\t ]+/g,w=h("br"),O=h(ve),ge=h("p"),B=h("tr"),me=h(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",xe,Ae]),D=h(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function ye(e,t){const r=t||{},n="children"in e?e.children:[],o=D(e),i=V(e,{whitespace:r.whitespace||"normal"}),a=[];(e.type==="text"||e.type==="comment")&&a.push(...R(e,{breakBefore:!0,breakAfter:!0}));let c=-1;for(;++c<n.length;)a.push(...P(n[c],e,{whitespace:i,breakBefore:c?void 0:o,breakAfter:c<n.length-1?w(n[c+1]):o}));const s=[];let u;for(c=-1;++c<a.length;){const l=a[c];typeof l=="number"?u!==void 0&&l>u&&(u=l):l&&(u!==void 0&&u>-1&&s.push(`
`.repeat(u)||" "),u=-1,s.push(l))}return s.join("")}function P(e,t,r){return e.type==="element"?we(e,t,r):e.type==="text"?r.whitespace==="normal"?R(e,r):be(e):[]}function we(e,t,r){const n=V(e,r),o=e.children||[];let i=-1,a=[];if(me(e))return a;let c,s;for(w(e)||B(e)&&M(t,e,B)?s=`
`:ge(e)?(c=2,s=2):D(e)&&(c=1,s=1);++i<o.length;)a=a.concat(P(o[i],e,{whitespace:n,breakBefore:i?void 0:c,breakAfter:i<o.length-1?w(o[i+1]):s}));return O(e)&&M(t,e,O)&&a.push("	"),c&&a.unshift(c),s&&a.push(s),a}function R(e,t){const r=String(e.value),n=[],o=[];let i=0;for(;i<=r.length;){k.lastIndex=i;const s=k.exec(r),u=s&&"index"in s?s.index:r.length;n.push(Ne(r.slice(i,u).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),i===0?t.breakBefore:!0,u===r.length?t.breakAfter:!0)),i=u+1}let a=-1,c;for(;++a<n.length;)n[a].charCodeAt(n[a].length-1)===8203||a<n.length-1&&n[a+1].charCodeAt(0)===8203?(o.push(n[a]),c=void 0):n[a]?(typeof c=="number"&&o.push(c),o.push(n[a]),c=0):(a===0||a===n.length-1)&&o.push(0);return o}function be(e){return[String(e.value)]}function Ne(e,t,r){const n=[];let o=0,i;for(;o<e.length;){I.lastIndex=o;const a=I.exec(e);i=a?a.index:e.length,!o&&!i&&a&&!t&&n.push(""),o!==i&&n.push(e.slice(o,i)),o=a?i+a[0].length:i}return o!==i&&!r&&n.push(""),n.join(" ")}function V(e,t){if(e.type==="element"){const r=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return r.wrap?"pre-wrap":"pre";case"td":case"th":return r.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}}return t.whitespace}function xe(e){return!!(e.properties||{}).hidden}function ve(e){return e.tagName==="td"||e.tagName==="th"}function Ae(e){return e.tagName==="dialog"&&!(e.properties||{}).open}const Ee={},Se=[];function Ce(e){const t=e||Ee;return function(r,n){K(r,"element",function(o,i){const a=Array.isArray(o.properties.className)?o.properties.className:Se,c=a.includes("language-math"),s=a.includes("math-display"),u=a.includes("math-inline");let l=s;if(!c&&!s&&!u)return;let f=i[i.length-1],d=o;if(o.tagName==="code"&&c&&f&&f.type==="element"&&f.tagName==="pre"&&(d=f,f=i[i.length-2],l=!0),!f)return;const g=ye(d,{whitespace:"pre"});let p;try{p=v.renderToString(g,{...t,displayMode:l,throwOnError:!0})}catch(N){const x=N,H=x.name.toLowerCase();n.message("Could not render math with KaTeX",{ancestors:[...i,o],cause:x,place:o.position,ruleId:H,source:"rehype-katex"});try{p=v.renderToString(g,{...t,displayMode:l,strict:"ignore",throwOnError:!1})}catch{p=[{type:"element",tagName:"span",properties:{className:["katex-error"],style:"color:"+(t.errorColor||"#cc0000"),title:String(N)},children:[{type:"text",value:g}]}]}}typeof p=="string"&&(p=ue(p).children);const _=f.children.indexOf(d);return f.children.splice(_,1,...p),Y})}}export{Ce as default};
